<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bevers – Jaarplanning & Aanwezigheid</title>

  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <!-- ============================================================
       TOPBAR
  ============================================================ -->
  <header class="topbar">
    <div class="topbar-left">
      <a class="backlink" href="index.html">← Terug</a>

      <img src="assets/OVN.logo.png" class="topbar-logo" alt="OVN logo" />

      <div class="topbar-title">
        <h1>Bevers</h1>
        <span>Jaarplanning & Aanwezigheid</span>
      </div>
    </div>

    <div class="topbar-right-icons">
      <img src="assets/Bevers-speltakteken.png" class="speltak-icon" alt="Bevers speltakteken" />

      <span id="loginStatus" class="leiding-badge hidden">
        Je bent ingelogd als leiding
      </span>
    </div>
  </header>

  <div class="container">

    <!-- ============================================================
         INFO BLOK (met WYSIWYG editor)
    ============================================================ -->
    <section class="info-block">

      <div class="info-header-row">
        <h2>Informatie</h2>

        <!-- Losse edit-knop voor alleen het infoveld -->
      <button id="infoEditButton" class="pill-btn outline info-edit-btn only-leiding">
          Info bewerken
        </button>
      </div>

      <div id="infotekst"></div>

      <!-- WYSIWYG EDITOR -->
      <div id="infoEditorWrapper" class="hidden">
        <div id="infoEditorToolbar">
          <button data-cmd="bold">B</button>
          <button data-cmd="italic"><i>I</i></button>
          <button data-cmd="underline"><u>U</u></button>
          <input type="color" id="colorPicker" />
        </div>

        <div id="infotekst_edit"
             class="rich-editor"
             contenteditable="true"></div>
      </div>
    </section>

    <!-- ============================================================
         PLANNING / TABEL
    ============================================================ -->
    <section class="planning-section">
      <div class="planning-header-row">
        <!-- Filters -->
        <div class="planning-controls">
          <span id="filterAll" class="chip active">Alles</span>
          <span id="filterFuture" class="chip">Komend</span>
          <span id="filterPast" class="chip">Verleden</span>
        </div>

        <!-- Acties voor tabel -->
        <button id="printButton" class="pill-btn outline print-btn">Printen</button>

        <!-- Duidelijkere tabel-bewerkknop -->
        <button id="editModeButton" class="pill-btn only-leiding primary tabel-edit-btn">
          ✏️ Tabel bewerken
        </button>

        <button class="pill-btn outline only-leiding" onclick="window.location.href='dashboard.html'">
          Dashboard
        </button>

        <!-- Handleiding (alleen leiding, via JS) -->
        <a id="handleidingButton"
           class="pill-btn outline only-leiding"
           href="assets/scouting_mail_handleiding_styled.pdf"
           target="_blank"
           download>
          Handleiding Mailbox
        </a>

        <!-- Knoppen om secties te openen + automatisch te scrollen -->
        <button id="openLedenbeheerButton" class="pill-btn outline only-leiding">
          Ledenbeheer
        </button>
        <button class="close-section" data-target="ledenbeheerSection">✖</button>
        <button id="openMeldingenButton" class="pill-btn outline only-leiding">
          Meldingen
        </button>
        <button class="close-section" data-target="meldingenSection">✖</button>
      </div>

      <!-- De tabel -->
      <div class="table-wrapper">
        <table class="planning-table">
          <thead>
            <!-- Wordt volledig door script.js gevuld -->
            <tr id="headerRowTop"></tr>
          </thead>
          <tbody id="tableBody"></tbody>
        </table>
      </div>

      <!-- Nieuwe opkomst toevoegen (alleen in bewerkmodus via JS) -->
      <div id="addOpkomstRow" class="add-row hidden">
        + Nieuwe opkomst toevoegen
      </div>
    </section>

    <!-- ============================================================
         LEDENBEHEER
    ============================================================ -->
    <section id="ledenbeheerSection" class="ledenbeheer hidden">
      <div class="ledenbeheer-header-row">
        <h2>Ledenbeheer</h2>

        <!-- Lid toevoegen knop duidelijk bovenaan -->
        <button id="addMemberButton" class="pill-btn primary hidden">
          Nieuw lid toevoegen
        </button>
      </div>

      <div class="ledenbeheer-columns">
        <div class="ledenbeheer-col">
          <h3>Jeugdleden</h3>
          <ul id="ledenbeheerJeugd"></ul>
        </div>

        <div class="ledenbeheer-col">
          <h3>Leiding</h3>
          <ul id="ledenbeheerLeiding"></ul>
        </div>
      </div>
    </section>

    <!-- ============================================================
         MELDINGEN
    ============================================================ -->
    <section id="meldingenSection" class="meldingen hidden">
      <h2>Meldingen & Instellingen</h2>

      <div class="meldingen-row">
        <div class="meldingen-label">
          <input type="checkbox" id="meldingLeidingAan" />
          Melding: te weinig leiding
        </div>
        <div class="meldingen-sub">
          Geeft een melding wanneer <b>aanwezig leiding</b> onder de ingestelde drempel komt.
        </div>
        <div class="meldingen-actions">
          <span>Drempel:</span>
          <input type="number" id="leidingDrempel" min="0" max="20" value="2" style="width: 60px;" />
        </div>
      </div>

      <div class="meldingen-row">
        <div class="meldingen-label">
          <input type="checkbox" id="meldingOnbekendAan" />
          Melding: onbekende aanwezigheden
        </div>
        <div class="meldingen-sub">
          Geeft een melding wanneer leden langere tijd op ‘onbekend’ staan.
        </div>
      </div>
    </section>

    <!-- ============================================================
         MODAL — Lid toevoegen
    ============================================================ -->
    <div id="addMemberModal" class="modal hidden">
      <div class="modal-content">
        <h3>Nieuw lid toevoegen</h3>

        <label>Type:</label>
        <select id="memberType">
          <option value="jeugd">Jeugd</option>
          <option value="leiding">Leiding</option>
        </select>

        <label>Naam:</label>
        <input type="text" id="memberName" />

        <div class="modal-actions">
          <button id="saveMember" class="pill-btn primary">Opslaan</button>
          <button id="cancelMember" class="pill-btn outline">Annuleren</button>
        </div>
      </div>
    </div>

    <!-- ============================================================
         MODAL — Opkomst toevoegen
    ============================================================ -->
    <div id="addOpkomstModal" class="modal hidden">
      <div class="modal-content">
        <h3>Nieuwe Opkomst</h3>

        <label>Datum:</label>
        <input type="date" id="opDatum" />

        <label>Starttijd:</label>
        <input type="time" id="opStart" value="10:30" />

        <label>Eindtijd:</label>
        <input type="time" id="opEind" value="12:30" />

        <label>Thema:</label>
        <input type="text" id="opThema" />

       <label>Locatie:</label>
        <select id="opLocatie">
          <option value="">Selecteer…</option>
          <option value="Kampvuurkuil">Kampvuurkuil</option>
          <option value="Zandveld">Zandveld</option>
          <option value="Grasveld">Grasveld</option>
          <option value="De Hoop">De Hoop</option>
          <option value="Bever lokaal">Bever lokaal</option>
          <option value="Welpen lokaal">Welpen lokaal</option>
          <option value="Van terrein af">Van terrein af</option>
          <option value="Externe locatie">Externe locatie</option>
        </select>

        <label>Materiaal:</label>
        <input type="text" id="opMateriaal" />

        <label>Type:</label>
        <select id="opType" class="hide-view">
          <option value="">Selecteer…</option>
          <option value="normaal">Normaal</option>
          <option value="bijzonder">Bijzonder</option>
          <option value="kamp">Kamp</option>
          <option value="geen">Geen opkomst</option>
        </select>

        <div class="modal-actions">
          <button id="saveOpkomst" class="pill-btn primary">Opslaan</button>
          <button id="cancelOpkomst" class="pill-btn outline">Annuleren</button>
        </div>
      </div>
    </div>

  </div> <!-- /container -->

  <!-- ============================================================
       SCRIPTS
  ============================================================ -->
  <script>
    // Configuratie specifiek voor BEVERS
    window.speltakConfig = {
      showBert: true,
      showLeiding: true
    };
  </script>

  <!-- Firebase setup -->
  <script src="firebase-config.js"></script>
  <script type="module" src="firebase-imports.js"></script>

  <!-- App scripts -->
  <script src="login.js"></script>
  <script type="module" src="utils.js"></script>
  <script type="module" src="script.js"></script>
  
 <div id="fabAddOpkomst" class="fab-add-opkomst only-leiding">+</div>

</body>
</html>
