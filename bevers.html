<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bevers – Jaarplanning</title>

  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <!-- ============================================================
       TOPBAR
  ============================================================ -->
  <header class="topbar">
    <div class="topbar-left">
      <a class="backlink" href="index.html">← Terug</a>

      <img src="assets/OVN.logo.png" class="topbar-logo" alt="OVN logo" />

      <div class="topbar-title">
        <h1>Bevers</h1>
        <span>Jaarplanning & Aanwezigheid</span>
      </div>
    </div>

    <div class="topbar-right-icons">
      <img src="assets/Bevers-speltakteken.png" class="speltak-icon" alt="Bevers logo" />

      <span id="loginStatus" class="leiding-badge hidden">Je bent ingelogd als leiding</span>

      <button id="logoutButton" class="pill-btn outline only-leiding">Uitloggen</button>
    </div>
  </header>


  <div class="container">

    <!-- ============================================================
         INFO BLOK
    ============================================================ -->
    <section class="info-block">
      <div class="info-header-row">
        <h2>Informatie</h2>

        <!-- Op mobiel wordt dit een floating pen-icoon -->
        <button id="infoEditButton" class="pill-btn outline only-leiding mobile-floating-pen">
          ✏️ Info
        </button>
      </div>

      <div id="infotekst"></div>

      <!-- Editor -->
      <div id="infoEditorWrapper" class="hidden">
        <div id="infoEditorToolbar">
          <button data-cmd="bold">B</button>
          <button data-cmd="italic"><i>I</i></button>
          <button data-cmd="underline"><u>U</u></button>
          <input type="color" id="colorPicker" />
        </div>

        <div id="infotekst_edit" class="rich-editor" contenteditable="true"></div>
      </div>
    </section>


    <!-- ============================================================
         KNOPPENBALK / TOOLBAR
    ============================================================ -->
    <div class="planning-header-row">

      <!-- Filters -->
      <div class="toolbar-section">
        <span id="filterAll" class="chip chip-primary active">Alles</span>
        <span id="filterFuture" class="chip chip-primary">Komend</span>
        <span id="filterPast" class="chip chip-primary">Verleden</span>
      </div>

      <!-- Acties -->
      <div class="toolbar-section">
        <button id="printButton" class="pill-btn outline">Printen</button>
      </div>

      <!-- Leiding-only -->
      <div class="toolbar-section only-leiding">
        <button id="editModeButton" class="pill-btn outline">✏️ Tabel bewerken</button>

        <button
          onclick="window.location.href='dashboard.html'"
          class="pill-btn outline only-leiding">
          Dashboard
        </button>

        <a id="handleidingButton"
           class="pill-btn outline only-leiding"
           href="assets/scouting_mail_handleiding_styled.pdf"
           target="_blank" download>
          Handleiding Mailbox
        </a>

        <button id="openLedenbeheerButton" class="pill-btn outline only-leiding">
          Ledenbeheer
        </button>

        <button id="openMeldingenButton" class="pill-btn outline only-leiding">
          Meldingen
        </button>
      </div>

    </div>


    <!-- ============================================================
         PLANNING TABEL
    ============================================================ -->
    <section class="planning-section">

      <!-- Floating header for scroll UX -->
      <div id="floatingHeader" class="floating-header hidden"></div>

      <div class="table-wrapper">
        <table class="planning-table">
          <thead>
            <tr id="headerRowTop"></tr>
          </thead>
          <tbody id="tableBody"></tbody>
        </table>
      </div>

      <div id="addOpkomstRow" class="add-row hidden only-leiding">
        + Nieuwe opkomst
      </div>
    </section>


    <!-- ============================================================
         LEDENBEHEER
    ============================================================ -->
    <section id="ledenbeheerSection" class="ledenbeheer hidden">
      <button class="close-section" data-target="ledenbeheerSection">✖</button>

      <div class="ledenbeheer-header-row">
        <h2>Ledenbeheer</h2>
        <button id="addMemberButton" class="pill-btn primary only-leiding">
          Nieuw lid toevoegen
        </button>
      </div>

      <div class="ledenbeheer-columns">
        <div class="ledenbeheer-col">
          <h3>Jeugdleden</h3>
          <ul id="ledenbeheerJeugd"></ul>
        </div>

        <div class="ledenbeheer-col">
          <h3>Leiding</h3>
          <ul id="ledenbeheerLeiding"></ul>
        </div>
      </div>
    </section>


    <!-- ============================================================
         MELDINGEN
    ============================================================ -->
    <section id="meldingenSection" class="meldingen hidden">
      <button class="close-section" data-target="meldingenSection">✖</button>

      <h2>Meldingen & Instellingen</h2>

      <div class="meldingen-row">
        <label class="meldingen-label">
          <input type="checkbox" id="meldingLeidingAan" />
          Melding: te weinig leiding
        </label>

        <div class="meldingen-sub">
          Waarschuwt wanneer aanwezige leiding onder de ingestelde drempel komt.
        </div>

        <div class="meldingen-actions">
          <span>Drempel:</span>
          <input type="number" id="leidingDrempel" min="0" max="10" value="2" />
        </div>
      </div>

      <div class="meldingen-row">
        <label class="meldingen-label">
          <input type="checkbox" id="meldingOnbekendAan" />
          Melding: onbekende aanwezigheden
        </label>

        <div class="meldingen-sub">
          Waarschuwt wanneer leden langdurig op ‘onbekend’ staan.
        </div>
      </div>
    </section>


    <!-- ============================================================
         MODAL — Lid toevoegen
    ============================================================ -->
    <div id="addMemberModal" class="modal hidden">
      <div class="modal-content">
        <h3>Nieuw lid toevoegen</h3>

        <label>Type:</label>
        <select id="memberType">
          <option value="jeugd">Jeugd</option>
          <option value="leiding">Leiding</option>
        </select>

        <label>Naam:</label>
        <input type="text" id="memberName" />

        <div class="modal-actions">
          <button id="saveMember" class="pill-btn primary">Opslaan</button>
          <button id="cancelMember" class="pill-btn outline">Annuleren</button>
        </div>
      </div>
    </div>


    <!-- ============================================================
         MODAL — Nieuwe Opkomst
    ============================================================ -->
    <div id="addOpkomstModal" class="modal hidden">
      <div class="modal-content">
        <h3>Nieuwe Opkomst</h3>

        <label>Datum:</label>
        <input type="date" id="opDatum" />

        <label>Starttijd:</label>
        <input type="time" id="opStart" value="10:30" />

        <label>Eindtijd:</label>
        <input type="time" id="opEind" value="12:30" />

        <label>Thema:</label>
        <input type="text" id="opThema" />

        <label>Locatie:</label>
        <select id="opLocatie">
          <option value="">Kies...</option>
          <option value="Kampvuurkuil">Kampvuurkuil</option>
          <option value="Zandveld">Zandveld</option>
          <option value="Grasveld">Grasveld</option>
          <option value="De Hoop">De Hoop</option>
          <option value="Bever Lokaal">Bever Lokaal</option>
          <option value="Welpen Lokaal">Welpen Lokaal</option>
          <option value="Van Terrein Af">Van Terrein Af</option>
          <option value="Externe Locatie">Externe Locatie</option>
        </select>

        <label>Type Opkomst:</label>
        <select id="opType">
          <option value="Normaal">Normaal</option>
          <option value="Bijzonder">Bijzonder</option>
          <option value="Kamp">Kamp</option>
          <option value="Geen opkomst">Geen opkomst</option>
        </select>

        <div class="modal-actions">
          <button id="saveOpkomst" class="pill-btn primary">Opslaan</button>
          <button id="cancelOpkomst" class="pill-btn outline">Annuleren</button>
        </div>
      </div>
    </div>


  </div>


  <!-- ============================================================
       FLOATING BUTTON
  ============================================================ -->
  <div id="fabAddOpkomst" class="fab-add-opkomst only-leiding">+</div>


  <!-- ============================================================
       SCRIPTS
  ============================================================ -->
  <script>
    window.speltakConfig = {
      showBert: true,
      showLeiding: true
    };
  </script>

  <script src="firebase-config.js"></script>
  <script type="module" src="firebase-imports.js"></script>
  <script src="login.js"></script>
  <script type="module" src="utils.js"></script>
  <script type="module" src="script.js"></script>

</body>
</html>
